{"version":3,"file":"visibility.js","sources":["../../src/js/visibility.ts"],"sourcesContent":["(function ($, Drupal) {\n\n  Drupal.behaviors.neoVisibility = {\n    attach: () => {\n      // The drupalSetSummary method required for this behavior is not available\n      // on the Blocks administration page, so we need to make sure this\n      // behavior is processed only if drupalSetSummary is defined.\n      if (typeof $.fn.drupalSetSummary === 'undefined') {\n        return;\n      }\n\n      /**\n       * Create a summary for checkboxes in the provided context.\n       *\n       * @param {Document|HTMLElement} context\n       *   A context where one would find checkboxes to summarize.\n       *\n       * @return {string}\n       *   A string with the summary.\n       */\n      function checkboxesSummary(context:any) {\n        const values = [];\n        const $checkboxes = $(context).find(\n          'input[type=\"checkbox\"]:checked + label',\n        );\n        const il = $checkboxes.length;\n        for (let i = 0; i < il; i++) {\n          values.push($($checkboxes[i]).html());\n        }\n        if (!values.length) {\n          values.push(Drupal.t('Not restricted'));\n        }\n        return values.join(', ');\n      }\n\n      $(\n        '[data-drupal-selector=\"edit-visibility-node-type\"], [data-drupal-selector=\"edit-visibility-language\"], [data-drupal-selector=\"edit-visibility-user-role\"], [data-drupal-selector=\"edit-visibility-response-status\"], [data-drupal-selector^=\"edit-visibility-entity-bundle\"]',\n      ).drupalSetSummary(checkboxesSummary);\n\n      $(\n        '[data-drupal-selector=\"edit-visibility-request-path\"]',\n      ).drupalSetSummary((context:any) => {\n        const $pages = $(context).find(\n          'textarea[name=\"visibility[request_path][pages]\"]',\n        ) as any;\n        if (!$pages.length || !$pages[0].value) {\n          return Drupal.t('Not restricted');\n        }\n        return Drupal.t('Restricted to certain pages');\n      });\n    }\n  };\n\n})(jQuery, Drupal);\n\nexport {};\n"],"names":["$","Drupal","checkboxesSummary","context","values","$checkboxes","il","i","$pages"],"mappings":"CAAC,SAAUA,GAAGC,GAAQ;AAEpBA,EAAAA,EAAO,UAAU,gBAAgB;AAAA,IAC/B,QAAQ,MAAM;AAIZ,UAAI,OAAOD,EAAE,GAAG,mBAAqB;AACnC;AAYF,eAASE,EAAkBC,GAAa;AACtC,cAAMC,IAAS,CAAA,GACTC,IAAcL,EAAEG,CAAO,EAAE;AAAA,UAC7B;AAAA,QAAA,GAEIG,IAAKD,EAAY;AACvB,iBAASE,IAAI,GAAGA,IAAID,GAAIC;AACtB,UAAAH,EAAO,KAAKJ,EAAEK,EAAYE,CAAC,CAAC,EAAE,MAAM;AAElC,eAACH,EAAO,UACVA,EAAO,KAAKH,EAAO,EAAE,gBAAgB,CAAC,GAEjCG,EAAO,KAAK,IAAI;AAAA,MACzB;AAEA,MAAAJ;AAAA,QACE;AAAA,MAAA,EACA,iBAAiBE,CAAiB,GAEpCF;AAAA,QACE;AAAA,MAAA,EACA,iBAAiB,CAACG,MAAgB;AAC5B,cAAAK,IAASR,EAAEG,CAAO,EAAE;AAAA,UACxB;AAAA,QAAA;AAEF,eAAI,CAACK,EAAO,UAAU,CAACA,EAAO,CAAC,EAAE,QACxBP,EAAO,EAAE,gBAAgB,IAE3BA,EAAO,EAAE,6BAA6B;AAAA,MAAA,CAC9C;AAAA,IACH;AAAA,EAAA;AAGJ,GAAG,QAAQ,MAAM;"}